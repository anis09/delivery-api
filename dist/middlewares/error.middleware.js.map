{"version":3,"sources":["../../src/middlewares/error.middleware.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport { logger } from \"./../utils/logger\";\r\nimport { errors } from \"./../constants/errors\";\r\n\r\nexport class HttpException extends Error {\r\n  public status: number;\r\n  public message: string;\r\n\r\n  constructor(status: number, message: string) {\r\n    super(message);\r\n    this.status = status;\r\n    this.message = message;\r\n  }\r\n}\r\n\r\nconst errorMiddleware = (\r\n  error: HttpException,\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n) => {\r\n  try {\r\n    const status: number = error.status || 500;\r\n    const message: string = error.message || errors.SOMETHING_WENT_WRONG;\r\n    console.log(\"Error\", error);\r\n    logger.error(\r\n      `[${req.method}] ${req.path} >> StatusCode:: ${status}, Message:: ${message}`\r\n    );\r\n    res\r\n      .status(status)\r\n      .json({ message: status >= 500 ? errors.SOMETHING_WENT_WRONG : message });\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\nexport default errorMiddleware;\r\n"],"names":["HttpException","Error","constructor","status","message","errorMiddleware","error","req","res","next","errors","SOMETHING_WENT_WRONG","console","log","logger","method","path","json"],"mappings":";;;;;;;;;;;IAIaA,aAAa;eAAbA;;IAgCb,OAA+B;eAA/B;;;wBAnCuB;wBACA;;;;;;;;;;;;;;AAEhB,IAAA,AAAMA,gBAAN,MAAMA,sBAAsBC;IAIjCC,YAAYC,MAAc,EAAEC,OAAe,CAAE;QAC3C,KAAK,CAACA;QAJR,uBAAOD,UAAP,KAAA;QACA,uBAAOC,WAAP,KAAA;QAIE,IAAI,CAACD,MAAM,GAAGA;QACd,IAAI,CAACC,OAAO,GAAGA;IACjB;AACF;AAEA,MAAMC,kBAAkB,CACtBC,OACAC,KACAC,KACAC,OACG;IACH,IAAI;QACF,MAAMN,SAAiBG,MAAMH,MAAM,IAAI;QACvC,MAAMC,UAAkBE,MAAMF,OAAO,IAAIM,cAAM,CAACC,oBAAoB;QACpEC,QAAQC,GAAG,CAAC,SAASP;QACrBQ,cAAM,CAACR,KAAK,CACV,CAAC,CAAC,EAAEC,IAAIQ,MAAM,CAAC,EAAE,EAAER,IAAIS,IAAI,CAAC,iBAAiB,EAAEb,OAAO,YAAY,EAAEC,QAAQ,CAAC;QAE/EI,IACGL,MAAM,CAACA,QACPc,IAAI,CAAC;YAAEb,SAASD,UAAU,MAAMO,cAAM,CAACC,oBAAoB,GAAGP,OAAO;QAAC;IAC3E,EAAE,OAAOE,OAAO;QACdG,KAAKH;IACP;AACF;MAEA,WAAeD"}